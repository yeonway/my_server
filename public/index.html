<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>๋ฉ์ธ ํ์ด์ง</title>
  <link rel="stylesheet" href="css/index.css">
  <link rel="stylesheet" href="css/topbar.css">
  <link rel="stylesheet" href="css/profile-menu.css">
  <script defer src="js/auth-helper.js"></script>
</head>
<body>
  <header class="site-topbar">
    <a href="/index.html" class="site-logo" aria-label="Dcout ๋ฉ์ธ์ผ๋ก ์ด๋">
      <span class="logo-accent">DC</span>
      <span class="logo-divider" aria-hidden="true"></span>
      <span class="logo-rest">OUT</span>
    </a>
  </header>

<h1>ํ์ํฉ๋๋ค!</h1>
  <div class="subtitle">
    ๋ค์ํ ๊ธฐ๋ฅ์ ํ ๊ณณ์์!<br>
    ์๋์์ ์ํ๋ ์๋น์ค๋ฅผ ์ํํด ์ด์ฉํด๋ณด์ธ์.
  </div>

  <div class="feature-grid">
    <div class="feature-card" onclick="goTo('chat.html')">
      <span class="emoji">๐ฌ</span>
      <h2>์ฑํ</h2>
      <p>๋ค๋ฅธ ์ฌ์ฉ์์ ์ค์๊ฐ ์ฑํ์ ์ฆ๊ธฐ์ธ์.</p>
    </div>
    <div class="feature-card" onclick="goTo('posts.html')">
      <span class="emoji">๐</span>
      <h2>๊ฒ์ํ</h2>
      <p>๊ฒ์๋ฌผ์ ๋ณด๊ณ, ์์ฑํ๊ณ, ๋๊ธ์ ๋จ๊ธฐ์ธ์.</p>
    </div>
    <div class="feature-card" onclick="goTo('profile.html')">
      <span class="emoji">๐ค</span>
      <h2>ํ๋กํ</h2>
      <p>๋ด ์๋ณด๋ฅผ ํ์ธํ๊ณ ์์ํ ์ ์์ต๋๋ค.</p>
    </div>
    <div class="feature-card" onclick="goTo('inquiry.html')">
      <span class="emoji">โ</span>
      <h2>๋ฌธ์ํ๊ธฐ</h2>
      <p>์๋น์ค์ ๋ํ ์๊ฒฌ์ด๋ ๋ฌธ์๋ฅผ ์๋ค์ฃผ์ธ์.</p>
    </div>
    <!-- ์ด๋ฏธ ์ค์ ์นด๋๊ฐ ์์ผ๋ฏ๋ก ์์ง -->
    <div class="feature-card" onclick="goTo('setting.html')">
      <span class="emoji">โ๏ธ</span>
      <h2>์ค์</h2>
      <p>๊ณ์ ์ค์ ๋ฐ ํ๊ฒฝ์ค์์ ๊ด๋ฆฌํ์ธ์.</p>
    </div>
    <div class="feature-card auth-card" onclick="goTo('signup.html')">
      <span class="emoji">๐</span>
      <h2>ํ์๊ฐ์</h2>
      <p>์ ๊ณ์์ ๋ง๋ค์ด ์๋น์ค๋ฅผ ์ด์ฉํ์ธ์.</p>
    </div>
    <div class="feature-card auth-card" onclick="goTo('login.html')">
      <span class="emoji">๐</span>
      <h2>๋ก๊ทธ์ธ</h2>
      <p>๊ณ์์ ๋ก๊ทธ์ธํ์ฌ ์์ํ์ธ์.</p>
    </div>
  </div>

    <script>
    document.addEventListener('DOMContentLoaded', async () => {
      let token = localStorage.getItem("token");
      if (!token && window.requireAuthToken) {
        try {
          token = await window.requireAuthToken();
        } catch (error) {
          console.warn('[index] ํํฐ ํ์ธ ์คํจ', error);
        }
      }

      const loggedInCards = document.querySelectorAll('.feature-card:not(.auth-card)');
      const loginCard = document.querySelector('.feature-card[onclick*="login.html"]');
      const signupCard = document.querySelector('.feature-card[onclick*="signup.html"]');

      if (token) {
        if (loginCard) loginCard.style.display = 'none';
        if (signupCard) signupCard.style.display = 'none';
      } else {
        loggedInCards.forEach(card => card.style.display = 'none');
      }
    });

    function goTo(page) {
      const token = localStorage.getItem('token');
      if (page === 'signup.html' && token) {
        alert('์ด๋ฏธ ๋ก๊ทธ์ธ๋์ด ์์ต๋๋ค. ๋ก๊ทธ์์ ํ ํ์๊ฐ์ํด ์ฃผ์ธ์.');
        return;
      }
      window.location.href = page;
    }
  </script>
  <script defer src="js/auth-helper.js"></script>
  <script defer src="js/profile-menu.js"></script>
</body>
</html>