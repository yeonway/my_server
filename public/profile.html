<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
  <meta name="theme-color" content="#1f2937">
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <title>내 프로필</title>
  <script src="js/theme.js"></script>
  <script defer src="js/auth-helper.js"></script>
  <link rel="stylesheet" href="css/profile.css">
  <link rel="stylesheet" href="css/topbar.css">
  <link rel="stylesheet" href="css/site-menu.css">
  <link rel="stylesheet" href="css/responsive.css">
  <link rel="stylesheet" href="css/mobile.css">
  <link rel="stylesheet" href="css/notifications.css">
  <link rel="stylesheet" href="css/profile-menu.css">
  <link rel="stylesheet" href="css/dark-mode.css">
  <link rel="stylesheet" href="css/mobile-responsive.css">
</head>
<body class="profile-page">
  <header class="site-topbar">
    <a href="/index.html" class="site-logo" aria-label="DCOUT 홈으로 이동">
      <span class="logo-accent">DC</span>
      <span class="logo-divider" aria-hidden="true"></span>
      <span class="logo-rest">OUT</span>
    </a>
    <nav class="site-menu" aria-label="주요 메뉴">
      <a href="chat.html">채팅</a>
      <a href="posts.html">게시판</a>
      <a href="profile.html" aria-current="page">프로필</a>
      <a href="inquiry.html">문의하기</a>
      <a href="setting.html">설정</a>
    </nav>
    <div class="topbar-actions">
      <span data-network-indicator>Online</span>
    </div>
  </header>

  <main class="profile-stage">
    <section class="profile-hero" aria-labelledby="profile-hero-heading">
      <h1 id="profile-hero-heading" class="sr-only">프로필 커스터마이징</h1>
      <div class="hero-background" id="backgroundWrapper">
        <img id="backgroundPreview" alt="프로필 배경 이미지" />
        <div class="background-actions">
          <button type="button" id="backgroundUploadBtn" class="ghost-btn">배경 변경</button>
          <button type="button" id="backgroundRemoveBtn" class="ghost-btn ghost-danger">배경 제거</button>
          <input type="file" id="backgroundInput" accept="image/*" hidden>
        </div>
      </div>
      <div class="hero-body">
        <div class="avatar-block">
          <div class="avatar-preview" id="avatarWrapper">
            <img id="profilePic" alt="프로필 사진" />
            <div class="avatar-placeholder" id="avatarPlaceholder" aria-hidden="true"></div>
          </div>
          <div class="avatar-actions">
            <button type="button" id="avatarUploadBtn" class="primary-btn">사진 변경</button>
            <button type="button" id="avatarRemoveBtn" class="ghost-btn">사진 제거</button>
            <input type="file" id="profilePicInput" accept="image/*" hidden>
          </div>
        </div>
        <div class="profile-meta">
          <label class="field">
            <span class="field-label">표시 이름</span>
            <input id="displayName" type="text" maxlength="40" placeholder="이름 없음" autocomplete="off">
          </label>
          <label class="field">
            <span class="field-label">소개</span>
            <textarea id="introInput" rows="3" placeholder="자기소개를 입력해 주세요"></textarea>
          </label>
          <label class="field">
            <span class="field-label">상태 메시지</span>
            <textarea id="statusMessageInput" rows="2" placeholder="오늘의 기분은 어떤가요?"></textarea>
          </label>
        </div>
      </div>
    </section>

    <section class="profile-controls" aria-labelledby="profile-privacy-heading">
      <div class="control-card">
        <div class="control-header">
          <h2 id="profile-privacy-heading">공개 설정</h2>
          <div class="visibility-toggle">
            <span>비공개</span>
            <label class="switch">
              <input type="checkbox" id="visibilityToggle" aria-describedby="visibilityHelp">
              <span class="slider"></span>
            </label>
            <span>공개</span>
          </div>
        </div>
        <p id="visibilityHelp" class="control-description">공개로 전환하면 누구나 프로필을 볼 수 있습니다.</p>
        <div class="scope-grid">
          <label class="field">
            <span class="field-label">게시글 공개 범위</span>
            <select id="scopePosts">
              <option value="public">전체 공개</option>
              <option value="followers">팔로워만</option>
              <option value="private">나만 보기</option>
            </select>
          </label>
          <label class="field">
            <span class="field-label">댓글 공개 범위</span>
            <select id="scopeComments">
              <option value="public">전체 공개</option>
              <option value="followers">팔로워만</option>
              <option value="private">나만 보기</option>
            </select>
          </label>
          <label class="field">
            <span class="field-label">채팅 공개 범위</span>
            <select id="scopeChats">
              <option value="public">전체 공개</option>
              <option value="followers">팔로워만</option>
              <option value="private">나만 보기</option>
            </select>
          </label>
          <label class="field">
            <span class="field-label">배지 공개 범위</span>
            <select id="scopeBadges">
              <option value="public">전체 공개</option>
              <option value="followers">팔로워만</option>
              <option value="private">나만 보기</option>
            </select>
          </label>
          <label class="field">
            <span class="field-label">활동 이력 공개 범위</span>
            <select id="scopeActivity">
              <option value="public">전체 공개</option>
              <option value="followers">팔로워만</option>
              <option value="private">나만 보기</option>
            </select>
          </label>
        </div>
      </div>
      <button type="button" class="primary-btn" id="saveProfileBtn">변경 사항 저장</button>
    </section>

    <section class="badge-manager" aria-labelledby="badge-manager-heading">
      <div class="section-heading">
        <h2 id="badge-manager-heading">보유 뱃지</h2>
        <p>보여주고 싶은 뱃지를 추가하거나 순서를 정리하세요.</p>
      </div>
      <ul id="badgeList" class="badge-list" aria-live="polite"></ul>
      <form id="badgeForm" class="badge-form">
        <div class="field-row">
          <label class="field">
            <span class="field-label">뱃지 이름</span>
            <input type="text" id="badgeName" required maxlength="30" placeholder="예: 열정 가득" autocomplete="off">
          </label>
          <label class="field">
            <span class="field-label">아이콘 (이모지 또는 URL)</span>
            <input type="text" id="badgeIcon" maxlength="120" placeholder="예: 🔥 또는 https://" autocomplete="off">
          </label>
        </div>
        <label class="field">
          <span class="field-label">설명</span>
          <input type="text" id="badgeDescription" maxlength="80" placeholder="뱃지 설명을 입력해 주세요" autocomplete="off">
        </label>
        <button type="submit" class="primary-btn">뱃지 추가</button>
      </form>
    </section>

    <section class="activity-feed" aria-labelledby="activity-feed-heading">
      <div class="section-heading">
        <h2 id="activity-feed-heading">활동 타임라인</h2>
        <p>중요한 활동을 직접 추가하거나 자동 수집된 정보를 확인하세요.</p>
      </div>
      <ul id="activityList" class="activity-list" aria-live="polite"></ul>
      <form id="activityForm" class="activity-form">
        <div class="field-row">
          <label class="field">
            <span class="field-label">유형</span>
            <select id="activityType">
              <option value="achievement">업적</option>
              <option value="post">게시글</option>
              <option value="comment">댓글</option>
              <option value="chat">채팅</option>
              <option value="system">시스템</option>
              <option value="custom">직접 입력</option>
            </select>
          </label>
          <label class="field">
            <span class="field-label">제목</span>
            <input type="text" id="activityTitle" maxlength="60" required placeholder="활동 제목">
          </label>
        </div>
        <label class="field">
          <span class="field-label">설명</span>
          <textarea id="activityDetail" rows="2" placeholder="세부 설명"></textarea>
        </label>
        <label class="field">
          <span class="field-label">연결 링크 (선택)</span>
          <input type="url" id="activityLink" placeholder="https://">
        </label>
        <button type="submit" class="ghost-btn">활동 추가</button>
      </form>
    </section>

    <section class="recent-activity" aria-labelledby="recent-activity-heading">
      <div class="section-heading">
        <h2 id="recent-activity-heading">최근 활동</h2>
        <p>프로필에서 바로 최근 게시글, 댓글, 채팅을 확인할 수 있습니다.</p>
      </div>
      <div class="recent-grid">
        <article class="recent-card" aria-labelledby="recent-posts-heading">
          <h3 id="recent-posts-heading">최근 게시글</h3>
          <ul id="recentPosts" class="recent-list"></ul>
        </article>
        <article class="recent-card" aria-labelledby="recent-comments-heading">
          <h3 id="recent-comments-heading">최근 댓글</h3>
          <ul id="recentComments" class="recent-list"></ul>
        </article>
        <article class="recent-card" aria-labelledby="recent-chats-heading">
          <h3 id="recent-chats-heading">최근 채팅</h3>
          <ul id="recentChats" class="recent-list"></ul>
        </article>
      </div>
    </section>
  </main>

  <div id="toastRoot"></div>

  <script src="/socket.io/socket.io.js"></script>
  <script defer src="js/notifications.js"></script>
  <script defer src="js/profile-menu.js"></script>
  <script defer src="js/pwa.js"></script>
  <script defer src="js/topbar-dock.js"></script>
  <script defer src="js/profile-page.js"></script>
</body>
</html>
